package com.aicareer.core.service.course;

import com.aicareer.core.dto.courseDto.CourseRequest;
import com.aicareer.core.validator.SyntaxValidator;
import com.aicareer.repository.course.PromptGenerator;

public class ServicePrompt implements PromptGenerator {

  @Override
  public String generatePrompt(CourseRequest request) {
    // Временно отключаем валидацию для отладки
    System.out.println("⚠️ Валидация временно отключена для отладки");
    // if (!SyntaxValidator.validate(request)) {
    //     throw new IllegalArgumentException("Validation failed. Cannot generate prompt.");
    // }

    return "«Вы — эксперт в разработке учебных программ с более чем 15-летним опытом в сфере образования по программированию.\n" +
        "\n" +
        "Вы получите структурированный ввод под названием CourseRequirements, в котором заданы точные требования к персонализированному курсу по программированию, включая:\n" +
        "\n" +
        "— основные темы и модули,\n" +
        "— обязательные практические задания и проекты,\n" +
        "— ожидаемые результаты обучения,\n" +
        "— рекомендуемую продолжительность курса,\n" +
        "— критерии успеха,\n" +
        "— а также контекст пользователя: текущий уровень навыков, мотивацию, доступное время в неделю, страхи и пробелы в знаниях.\n" +
        "\n" +
        "Ваша задача — разработать максимально практичный недельный учебный план, полностью соответствующий этим требованиям.\n" +
        "\n" +
        "Правила:\n" +
        "\n" +
        "— Разбейте курс на недельные блоки (week1, week2, ..., до рекомендованной продолжительности).\n" +
        "— Каждая неделя должна быть представлена в одной строке строго в следующем формате:\n" +
        "weekN: goal: \"[четкая цель недели]\". task1: \"[конкретное практическое задание]\". urls: \"[надежные URL-адреса через запятую]\". task2: \"[ещё одно задание]\". urls: \"[соответствующие URL-адреса]\" ...\n" +
        "— Включайте от 1 до 3 практических заданий в неделю в зависимости от доступного пользователю времени.\n" +
        "— Каждое задание должно быть конкретным, выполнимым и ориентированным на проект (например, «Создайте список задач», а не «Прочитайте про массивы»).\n" +
        "— Для каждого задания предоставляйте проверенные, качественные и бесплатные ресурсы (например, MDN, freeCodeCamp, Stepik, официальную документацию, надежные YouTube-каналы).\n" +
        "— Учитывайте временные ограничения: например, если у пользователя 4 часа в неделю — максимум 2–4 небольших задания или 1 среднее.\n" +
        "— Явно учитывайте страхи пользователя (например, если боится CSS — начните с визуальных инструментов или готовых стилей).\n" +
        "— Последняя неделя обязательно должна содержать финальный проект (capstone) в качестве основного задания.\n" +
        "— НЕ используйте Markdown, маркированные списки или переносы строк внутри описания недели.\n" +
        "— НЕ добавляйте никакого текста до week1 или после последней недели.\n" +
        "\n" +
        "Теперь вот входные данные CourseRequirements: " + request;
  }
}